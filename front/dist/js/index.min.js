function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$("#left-arrow"),this.rightArrow=$("#right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){this.page=1,this.category_id,template.defaults.imports.timeSince=function(n){var e=(n=new Date(n)).getTime(),t=((new Date).getTime()-e)/1e3;return t<60?"刚刚":60<=t&&t<3600?t/60+"分钟前":3600<=t&&t<86400?int(t/60/60)+"小时前":86400<=t&&t<2592e3?t/60/60/24+"天前":n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.listenBannerHomer=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index++,n.index===n.bannerCount+2&&(n.bannerUl.css({left:-n.bannerWidth}),n.index=2),n.animate()},2e3)},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){n.index--,n.index<0&&(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1),n.animate()}),n.rightArrow.click(function(){n.index++,n.index>=n.bannerCount+2&&(n.bannerUl.css({left:-n.bannerWidth}),n.index=2),n.animate()})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.animate=function(){var n=this;this.bannerUl.stop().animate({left:-n.bannerWidth*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.run=function(){this.loop(),this.listenArrowClick(),this.listenBannerHomer(),this.initPageControl(),this.listenPageControl(),this.initBanner(),console.log("Banner listenArrowClick")},Index.prototype.listenLoadMore=function(){var i=this,r=$("#load-more-btn");r.click(function(){myajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(e.length<=0)return void r.hide();var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page++}}})})},Index.prototype.listenCategoryClick=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),n=r.attr("data-category");o.category_id=n;myajax.get({url:"/news/list/",data:{p:1,category_id:n},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),o.page=1,r.addClass("active").siblings().removeClass("active")}}})})},Index.prototype.run=function(){this.listenLoadMore(),this.listenCategoryClick(),console.log("hello")},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwYWdlIiwiY2F0ZWdvcnlfaWQiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGUiLCJkYXRldHMiLCJEYXRlIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsImludCIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwic2VsZiIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwibGlzdGVuQmFubmVySG9tZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJ0aW1lciIsInRvZ2dsZUFycm93IiwibG9vcCIsInNldEludGVydmFsIiwiYW5pbWF0ZSIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJydW4iLCJjb25zb2xlIiwibG9nIiwibGlzdGVuTG9hZE1vcmUiLCJsb2FkTW9yZUJ0biIsIm15YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3MiLCJ0cGwiLCJuZXdzZXMiLCJsaXN0ZW5DYXRlZ29yeUNsaWNrIiwibGkiLCJhdHRy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c291cmNlc0NvbnRlbnQiOlsiLy8g5Y6f5Z6L6ZO+IHByb3RvdHlwZVxuZnVuY3Rpb24gQmFubmVyKCkgeyAvLyDlrprkuYnnsbtcbiAgICAvLyDnsbvkvLzmnoTpgKDlh73mlbBcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoJyNsZWZ0LWFycm93Jyk7XG4gICAgdGhpcy5yaWdodEFycm93ID0gJCgnI3JpZ2h0LWFycm93Jyk7XG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoJyNiYW5uZXItdWwnKTtcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKCcucGFnZS1jb250cm9sJyk7XG59XG5cbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGZpcnN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQgLSAxKS5jbG9uZSgpO1xuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJXaWR0aCAqIChzZWxmLmJhbm5lckNvdW50ICsgMiksIFwibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmJhbm5lckNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIilcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOiAxMiAqIHNlbGYuYmFubmVyQ291bnQgKyA4ICogMiArIDE2ICogKHNlbGYuYmFubmVyQ291bnQgLSAxKX0pXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvbWVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubG9vcCgpO1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgLy8g5a6a5pe25ZmoXG4gICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAyKSB7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lcldpZHRofSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9LCAyMDAwKTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmIChpc1Nob3cpIHtcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcbiAgICB9XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5pbmRleC0tO1xuICAgICAgICBpZiAoc2VsZi5pbmRleCA8IDApIHtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGggKiBzZWxmLmJhbm5lckNvdW50fSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG5cbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQgKyAyKSB7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lcldpZHRofSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIG5vaW5zcGVjdGlvbiBKU1VucmVzb2x2ZWRGdW5jdGlvblxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aCAqIHNlbGYuaW5kZXh9LCA1MDApO1xuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XG4gICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkgeyAvLyDnu5nnsbvlrprkuYnlh73mlbBcbiAgICB0aGlzLmxvb3AoKTtcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvbWVyKCk7XG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XG4gICAgdGhpcy5pbml0QmFubmVyKCk7XG4gICAgY29uc29sZS5sb2coXCJCYW5uZXIgbGlzdGVuQXJyb3dDbGlja1wiKTtcbn07XG5cbmZ1bmN0aW9uIEluZGV4KCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2UgPSAxO1xuICAgIHNlbGYuY2F0ZWdvcnlfaWQ7XG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZSkge1xuXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykgLyAxMDAwO1xuXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xuICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xuICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwKSB7XG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IHRpbWVzdGFtcCAvIDYwO1xuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJztcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcbiAgICAgICAgICAgIHZhciBob3VycyA9IGludCh0aW1lc3RhbXAgLyA2MCAvIDYwKTtcbiAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/ml7bliY0nO1xuICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAqIDYwICogMjQgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0ICogMzApIHtcbiAgICAgICAgICAgIHZhciBkYXlzID0gdGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0O1xuICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgICAgICB2YXIgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgIHJldHVybiB5ZWFyICsgJy8nICsgbW9udGggKyAnLycgKyBkYXkgKyAnICcgKyBob3VyICsgJzonICsgbWludXRlO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbG9hZE1vcmVCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xuICAgIGxvYWRNb3JlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xuICAgICAgICBteWFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZUJ0bi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHtcIm5ld3Nlc1wiOiBuZXdzfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcbn07XG5cbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdGFiR3JvdXAgPSAkKFwiLmxpc3QtdGFiXCIpO1xuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcbiAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgIG15YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3cyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3N9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICB1bC5lbXB0eSgpOyAvLyDlsIbmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDliKDmjolcbiAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZSgpO1xuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlDbGljaygpO1xuICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xufTtcblxuLy8gJCBqcXVlcnnlrprkuYnnmoTvvIzlj6rmnInlnKjmlofmnKzlhYPntKDliqDovb3lrozlkI7miY3kvJrmiafooYxcbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7IC8vIOWIm+W7uuexu+WvueixoVxuICAgIGJhbm5lci5ydW4oKTtcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcbiAgICBpbmRleC5ydW4oKTtcbn0pO1xuIl19
