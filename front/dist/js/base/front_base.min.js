function Barss(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsBtn=$(".sms-captcha-btn")}Barss.prototype.listenBarHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Barss.prototype.runs=function(){this.listenBarHover()},Auth.prototype.showAuthInterface=function(t,n){var s=this;t?(s.maskWrapper.show(),n?s.scrollWrapper.css({left:0}):s.scrollWrapper.css({left:-400})):s.maskWrapper.hide()},Auth.prototype.listenClick=function(){var t=this;$(".signin-btn").click(function(){t.showAuthInterface(!0,!0)}),$(".signup-btn").click(function(){t.showAuthInterface(!0,!1)}),$(".close-btn").click(function(){t.showAuthInterface(!1)}),$(".switch").click(function(){parseInt(t.scrollWrapper.position().left)<0?t.showAuthInterface(!0,!0):t.showAuthInterface(!0,!1)})},Auth.prototype.listenLoginClick=function(){var a=this;console.log("=======listenLoginClick=======");var e=$("#login_tel"),o=$("#login_pwd"),i=$(".check-box");$(".submit-btn").click(function(){var t=e.val(),n=o.val(),s=i.prop("checked");newajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:s?1:0},success:function(t){if(200==t.code)a.showAuthInterface(!1),window.location.reload();else{for(var n in t)t[n];var s=t.message;if("string"==typeof s||s.constructor==String)window.messageBox.show(s);else for(var e in s){var o=s[e][0];window.messageBox.show(o);break}}}})})},Auth.prototype.listenCaptchaClick=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.smsSuccess=function(){var t=this;messageBox.showSuccess("发送短信验证码成功"),t.smsBtn.addClass("disabled"),t.smsBtn.unbind("click");var n=10,s=setInterval(function(){t.smsBtn.text(n+"s"),--n<0&&(clearInterval(s),t.smsBtn.removeClass("disabled"),t.smsBtn.text("发送验证码"),t.listenSmsClick())},1e3)},Auth.prototype.listenSmsClick=function(){var n=this,s=$('.signup-group input[name="telephone"]');n.smsBtn.click(function(){var t=s.val();t?newajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccess()},fail:function(t){console.log(t)}}):messageBox.showInfo("请输入手机号码")})},Auth.prototype.listenSignup=function(){var f=this,m=$(".signup-group");m.find(".submit-btn").click(function(t){t.preventDefault();var n=m.find("input[name='telephone']"),s=m.find("input[name='username']"),e=m.find("input[name='img_captcha']"),o=m.find("input[name='password1']"),a=m.find("input[name='password2']"),i=m.find("input[name='sms_captcha']"),c=n.val(),r=s.val(),l=e.val(),u=o.val(),p=a.val(),h=i.val();newajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:l,password1:u,password2:p,sms_captcha:h},success:function(t){f.showAuthInterface(!1),window.location.reload()}})})},Auth.prototype.run=function(){this.listenClick(),this.listenLoginClick(),this.listenCaptchaClick(),this.listenSmsClick(),this.listenSignup()},$(function(){(new Auth).run(),(new Barss).runs()}),console.log("=========");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UvZnJvbnRfYmFzZS5qcyJdLCJuYW1lcyI6WyJCYXJzcyIsIkF1dGgiLCJzZWxmIiwidGhpcyIsIm1hc2tXcmFwcGVyIiwiJCIsInNjcm9sbFdyYXBwZXIiLCJzbXNCdG4iLCJwcm90b3R5cGUiLCJsaXN0ZW5CYXJIb3ZlciIsImF1dGhCb3giLCJib3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwicnVucyIsInNob3dBdXRoSW50ZXJmYWNlIiwibG9naW4iLCJjc3MiLCJsZWZ0IiwibGlzdGVuQ2xpY2siLCJjbGljayIsInBhcnNlSW50IiwicG9zaXRpb24iLCJsaXN0ZW5Mb2dpbkNsaWNrIiwiY29uc29sZSIsImxvZyIsInRlbGVwaG9uZUlucHV0IiwicHdkSW5wdXQiLCJjaGVjayIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwibmV3YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibmFtZSIsIm1lc3NhZ2VPYmoiLCJjb25zdHJ1Y3RvciIsIlN0cmluZyIsIm1lc3NhZ2VCb3giLCJrZXkiLCJtZXNzYWdlIiwibGlzdGVuQ2FwdGNoYUNsaWNrIiwiY2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zU3VjY2VzcyIsInNob3dTdWNjZXNzIiwiYWRkQ2xhc3MiLCJ1bmJpbmQiLCJjb3VudCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwibGlzdGVuU21zQ2xpY2siLCJ0ZWxJbnB1dCIsImdldCIsImZhaWwiLCJlcnJvciIsInNob3dJbmZvIiwibGlzdGVuU2lnbnVwIiwic2lnbnVwR3JvdXAiLCJmaW5kIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxTQW9CVCxTQUFTQyxPQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxFQUFLSSxjQUFnQkQsRUFBRSxtQkFDdkJILEVBQUtLLE9BQVNGLEVBQUUsb0JBcEJwQkwsTUFBTVEsVUFBVUMsZUFBaUIsV0FDN0IsSUFBSUMsRUFBVUwsRUFBRSxhQUNaTSxFQUFNTixFQUFFLGtCQUNaSyxFQUFRRSxNQUFNLFdBQ1ZELEVBQUlFLFFBQ0wsV0FDQ0YsRUFBSUcsVUFJWmQsTUFBTVEsVUFBVU8sS0FBTyxXQUNSWixLQUNOTSxrQkFXVFIsS0FBS08sVUFBVVEsa0JBQW9CLFNBQVVILEVBQU1JLEdBQy9DLElBQUlmLEVBQU9DLEtBQ1BVLEdBQ0FYLEVBQUtFLFlBQVlTLE9BQ2JJLEVBQ0FmLEVBQUtJLGNBQWNZLElBQUksQ0FBQ0MsS0FBUSxJQUVoQ2pCLEVBQUtJLGNBQWNZLElBQUksQ0FBQ0MsTUFBUyxPQUdyQ2pCLEVBQUtFLFlBQVlVLFFBSXpCYixLQUFLTyxVQUFVWSxZQUFjLFdBQ3pCLElBQUlsQixFQUFPQyxLQUVLRSxFQUFFLGVBQ1JnQixNQUFNLFdBQ1puQixFQUFLYyxtQkFBa0IsR0FBTSxLQUdqQlgsRUFBRSxlQUNSZ0IsTUFBTSxXQUNabkIsRUFBS2MsbUJBQWtCLEdBQU0sS0FHbEJYLEVBQUUsY0FDUmdCLE1BQU0sV0FDWG5CLEVBQUtjLG1CQUFrQixLQUdYWCxFQUFFLFdBQ1JnQixNQUFNLFdBQ0RDLFNBQVNwQixFQUFLSSxjQUFjaUIsV0FBV0osTUFDdkMsRUFDUGpCLEVBQUtjLG1CQUFrQixHQUFNLEdBRTdCZCxFQUFLYyxtQkFBa0IsR0FBTSxNQUt6Q2YsS0FBS08sVUFBVWdCLGlCQUFtQixXQUM5QixJQUFJdEIsRUFBT0MsS0FDWHNCLFFB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TWhDMUMsS0FBS08sVUFBVStFLElBQU0sV0FDakJwRixLQUFLaUIsY0FDTGpCLEtBQUtxQixtQkFDTHJCLEtBQUtnRCxxQkFDTGhELEtBQUsrRCxpQkFDTC9ELEtBQUtxRSxnQkFHVG5FLEVBQUUsWUFDYSxJQUFJSixNQUNWc0YsT0FDSyxJQUFJdkYsT0FDVmUsU0FLUlUsUUFBUUMsSUFBSSIsImZpbGUiOiJiYXNlL2Zyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQmFyc3MoKSB7XG4gICAgLy8gdmFyIHNlbGYgPSB0aGlzO1xufVxuXG5CYXJzcy5wcm90b3R5cGUubGlzdGVuQmFySG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1dGhCb3ggPSAkKFwiLmF1dGgtYm94XCIpO1xuICAgIHZhciBib3ggPSAkKCcudXNlci1tb3JlLWJveCcpO1xuICAgIGF1dGhCb3guaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBib3guc2hvdygpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94LmhpZGUoKTtcbiAgICB9KTtcbn07XG5cbkJhcnNzLnByb3RvdHlwZS5ydW5zID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkJhckhvdmVyKCk7XG59O1xuXG4vLyAvKiDnmbvpmYbpqozor4Hnm7jlhbMgc3RhcnQgKi9cbmZ1bmN0aW9uIEF1dGgoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XG4gICAgc2VsZi5zY3JvbGxXcmFwcGVyID0gJCgnLnNjcm9sbC13cmFwcGVyJyk7XG4gICAgc2VsZi5zbXNCdG4gPSAkKCcuc21zLWNhcHRjaGEtYnRuJyk7XG59XG5cbkF1dGgucHJvdG90eXBlLnNob3dBdXRoSW50ZXJmYWNlID0gZnVuY3Rpb24gKHNob3csIGxvZ2luKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmIChzaG93KSB7XG4gICAgICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xuICAgICAgICBpZiAobG9naW4pIHtcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjogLTQwMH0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XG4gICAgfVxufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XG4gICAgc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zaG93QXV0aEludGVyZmFjZSh0cnVlLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHZhciBzaWdudXBCdG4gPSAkKCcuc2lnbnVwLWJ0bicpO1xuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2hvd0F1dGhJbnRlcmZhY2UodHJ1ZSwgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zaG93QXV0aEludGVyZmFjZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB2YXIgc3dpdGNoQnRuID0gJCgnLnN3aXRjaCcpO1xuICAgIHN3aXRjaEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gcGFyc2VJbnQoc2VsZi5zY3JvbGxXcmFwcGVyLnBvc2l0aW9uKCkubGVmdCk7XG4gICAgICAgIGlmIChsZWZ0IDwgMCkgeyAvLyBzaWdudXBcbiAgICAgICAgICAgIHNlbGYuc2hvd0F1dGhJbnRlcmZhY2UodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7IC8vIHNpZ25pblxuICAgICAgICAgICAgc2VsZi5zaG93QXV0aEludGVyZmFjZSh0cnVlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlbkxvZ2luQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGNvbnNvbGUubG9nKFwiPT09PT09PWxpc3RlbkxvZ2luQ2xpY2s9PT09PT09XCIpO1xuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoJyNsb2dpbl90ZWwnKTtcbiAgICB2YXIgcHdkSW5wdXQgPSAkKCcjbG9naW5fcHdkJyk7XG4gICAgdmFyIGNoZWNrID0gJCgnLmNoZWNrLWJveCcpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwibGlzdGVuTG9naW5DbGlja1wiKTtcbiAgICAvLyAvLyB2YXIgJHN1Ym1pdCA9IHNpZ25Hcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xuICAgIHZhciBzdWJtaXQgPSAkKCcuc3VibWl0LWJ0bicpO1xuICAgIHN1Ym1pdC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gcHdkSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciByZW1lbWJlciA9IGNoZWNrLnByb3AoXCJjaGVja2VkXCIpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZWxlcGhvbmUpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXNzd29yZCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlbWVtYmVyKTtcblxuICAgICAgICBuZXdhamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlciA/IDEgOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0F1dGhJbnRlcmZhY2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXMgKz0gbmFtZSArIFwiOlwiICsgcmVzdWx0W25hbWVdICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmogPSByZXN1bHRbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlT2JqID09ICdzdHJpbmcnIHx8IG1lc3NhZ2VPYmouY29uc3RydWN0b3IgPT0gU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2VPYmopO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2VPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuQ2FwdGNoYUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYXB0Y2hhID0gJCgnLmltZy1jYXB0Y2hhJyk7XG4gICAgY2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhcHRjaGEuYXR0cihcInNyY1wiLCBcIi9hY2NvdW50L2ltZ19jYXB0Y2hhL1wiICsgXCI/cmFuZG9tPVwiICsgTWF0aC5yYW5kb20oKSk7XG4gICAgfSk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi5Y+R6YCB55+t5L+h6aqM6K+B56CB5oiQ5YqfXCIpO1xuICAgIHNlbGYuc21zQnRuLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIHNlbGYuc21zQnRuLnVuYmluZCgnY2xpY2snKTtcbiAgICB2YXIgY291bnQgPSAxMDtcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc21zQnRuLnRleHQoY291bnQgKyBcInNcIik7XG4gICAgICAgIGNvdW50LS07XG4gICAgICAgIGlmIChjb3VudCA8IDApIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICAgICAgc2VsZi5zbXNCdG4ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBzZWxmLnNtc0J0bi50ZXh0KFwi5Y+R6YCB6aqM6K+B56CBXCIpO1xuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDbGljaygpO1xuICAgICAgICB9XG4gICAgfSwgMTAwMCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TbXNDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRlbElucHV0ID0gJCgnLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPVwidGVsZXBob25lXCJdJyk7XG4gICAgc2VsZi5zbXNCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsSW5wdXQudmFsKCk7XG4gICAgICAgIGlmICghdGVsZXBob25lKSB7XG4gICAgICAgICAgICBtZXNzYWdlQm94LnNob3dJbmZvKFwi6K+36L6T5YWl5omL5py65Y+356CBXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG5ld2FqYXguZ2V0KHtcbiAgICAgICAgICAgIFwidXJsXCI6ICcvYWNjb3VudC9zbXNfY2FwdGNoYS8nLFxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcbiAgICAgICAgICAgICAgICBcInRlbGVwaG9uZVwiOiB0ZWxlcGhvbmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZmFpbFwiOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ251cEdyb3VwLmZpbmQoJy5zdWJtaXQtYnRuJyk7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XG4gICAgICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XG4gICAgICAgIHZhciBzbXNDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcblxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQyID0gcGFzc3dvcmQySW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKTtcblxuICAgICAgICBuZXdhamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9yZWdpc3Rlci8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAnaW1nX2NhcHRjaGEnOiBpbWdfY2FwdGNoYSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzogcGFzc3dvcmQxLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOiBwYXNzd29yZDIsXG4gICAgICAgICAgICAgICAgJ3Ntc19jYXB0Y2hhJzogc21zX2NhcHRjaGFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dBdXRoSW50ZXJmYWNlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubGlzdGVuQ2xpY2soKTtcbiAgICB0aGlzLmxpc3RlbkxvZ2luQ2xpY2soKTtcbiAgICB0aGlzLmxpc3RlbkNhcHRjaGFDbGljaygpO1xuICAgIHRoaXMubGlzdGVuU21zQ2xpY2soKTtcbiAgICB0aGlzLmxpc3RlblNpZ251cCgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xuICAgIGF1dGgucnVuKCk7XG4gICAgdmFyIGJhciA9IG5ldyBCYXJzcygpO1xuICAgIGJhci5ydW5zKCk7XG59KTtcblxuLyog55m76ZmG6aqM6K+B55u45YWzIHN0YXJ0ICovXG5cbmNvbnNvbGUubG9nKFwiPT09PT09PT09XCIpO1xuIl19
