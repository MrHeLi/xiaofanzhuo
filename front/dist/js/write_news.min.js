function News(){}News.prototype.initUeditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileClick=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),myajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$("input[name='title']").val(),n=$("select[name='category']").val(),i=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),a=window.ue.getContent();console.log(e+":"+i+":"+o+":"+a),myajax.post({url:"/cms/write_news/",data:{title:e,category:n,desc:i,thumbnail:o,content:a},success:function(t){200===t.code&&xfzalert.alertSuccess("恭喜！新闻发表成功！",function(){window.location.reload()})}})})},News.prototype.run=function(){var t=this;t.listenUploadFileClick(),t.initUeditor(),t.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRVZWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVDbGljayIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwibXlhamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsImxpc3RlblN1Ym1pdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIiwicnVuIiwic2VsZiIsInRoaXMiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFFBSVRBLEtBQUtDLFVBQVVDLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBVSxDQUMvQkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUtyQlIsS0FBS0MsVUFBVVEsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCSyxPQUFPQyxLQUFLLENBQ1JDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBYyxFQUNkQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSUwsRUFBTUssRUFBYSxLQUFPLElBQ1RkLEVBQUUsbUJBQ1JlLElBQUlOLFVBT3ZDcEIsS0FBS0MsVUFBVTBCLGtCQUFvQixXQUNmaEIsRUFBRSxlQUNSaUIsTUFBTSxTQUFVQyxHQUN0QkEsRUFBTUMsaUJBSU4sSUFBSUMsRUFBUXBCLEVBQUUsdUJBQXVCZSxNQUNqQ00sRUFBV3JCLEVBQUUsMkJBQTJCZSxNQUN4Q08sRUFBT3RCLEVBQUUsc0JBQXNCZSxNQUMvQlEsRUFBWXZCLEVBQUUsMkJBQTJCZSxNQUN6Q1MsRUFBVWhDLE9BQU9DLEdBQUdnQyxhQUV4QkMsUUFBUUMsSUFBSVAsRUFBUSxJQUFNRSxFQUFPLElBQU1DLEVBQVksSUFBTUMsR0FVekRqQixPQUFPQyxLQUFLLENBQ1JDLElBQU8sbUJBQ1BDLEtBQVEsQ0FDSlUsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsR0FFZlgsUUFBVyxTQUFVQyxHQUNLLE1BQW5CQSxFQUFhLE1BQ1pjLFNBQVNDLGFBQWEsYUFBYSxXQUMvQnJDLE9BQU9zQyxTQUFTQyxpQkFReEMxQyxLQUFLQyxVQUFVMEMsSUFBTSxXQUNqQixJQUFJQyxFQUFPQyxLQUNYRCxFQUFLbkMsd0JBQ0xtQyxFQUFLMUMsY0FDTDBDLEVBQUtqQixxQkFHVGhCLEVBQUUsWUFDYSxJQUFJWCxNQUNWMkMiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge1xuXG59XG5cbk5ld3MucHJvdG90eXBlLmluaXRVZWRpdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93LnVlID0gVUUuZ2V0RWRpdG9yKCdlZGl0b3InLCB7XG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcbiAgICB9KTtcblxufTtcblxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICBteWFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6ZmFsc2UsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoXCIjc3VibWl0LWJ0blwiKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIHZhciBidG4gPSAkKHRoaXMpO1xuICAgICAgICAvLyB2YXIgcGsgPSBidG4uYXR0cignZGF0YS1uZXdzLWlkJyk7XG5cbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgY29udGVudCA9IHdpbmRvdy51ZS5nZXRDb250ZW50KCk7XG5cbiAgICAgICAgY29uc29sZS5sb2codGl0bGUgKyBcIjpcIiArIGRlc2MgKyBcIjpcIiArIHRodW1ibmFpbCArIFwiOlwiICsgY29udGVudCk7XG5cbiAgICAgICAgLy8gdmFyIHVybCA9ICcnO1xuICAgICAgICAvLyBpZihwayl7XG4gICAgICAgIC8vICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcbiAgICAgICAgLy8gfWVsc2V7XG4gICAgICAgIC8vICAgICB1cmwgPSAnL2Ntcy93cml0ZV9uZXdzLyc7XG4gICAgICAgIC8vIH1cblxuXG4gICAgICAgIG15YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiBcIi9jbXMvd3JpdGVfbmV3cy9cIixcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ+aBreWWnO+8geaWsOmXu+WPkeihqOaIkOWKn++8gScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlblVwbG9hZEZpbGVDbGljaygpO1xuICAgIHNlbGYuaW5pdFVlZGl0b3IoKTtcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XG4gICAgbmV3cy5ydW4oKTtcbn0pO1xuIl19
